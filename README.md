# C64x+ DSP Loop Optimization Examples

> ⚠️ **本リポジトリは、TI C64x+ DSPを対象とした最適化技法の理解・研究を目的とした個人実装です。**
> 実機による完全な動作検証は行っておらず、性能や動作の正当性を保証するものではありません。

---

## 概要（Overview）

TIのC64x+ DSP向けに、ループカーネルの最適化（SIMD命令化、ソフトウェアパイプライニング、VLIW命令スケジューリング等）を段階的に適用した実装例を示します。  
目的は、**手動アセンブリによる性能限界の探究**と、**コンパイラ最適化の振る舞いの理解**です。

---

## 環境（Development Environment）

- **IDE**: Code Composer Studio v7.4.0.00015  
- **ターゲット**: Generic C64X+ Device  


---

## カーネル実装と比較（Loop Kernel Implementations）

| 実装名 | 説明                         | 備考 |
|--------|------------------------------|------|
| `intrinsic.c` |Intrinsic関数を用いたSIMD化とループ展開 | アルゴリズム内でSIMD適用可能な領域を検出し、該当箇所にIntrinsic関数を導入します。また、最適化の一環として、小規模かつ固定長のループはループアンローリングを適用しています。 |
| `asm1.asm`    | 最適化を排したストレート命令シーケンス  | 演算ユニットアサイン、レジスタアサイン、ディレイスロットを配慮しつつ、最適化を排して命令をストレートにシーケンシャルで並べる |
| `asm2.asm`    | ループ内命令の再配置と効率化           | ループ内の命令順序を最適化し、依存関係を考慮して命令を密に配置します。重複する処理はループ外に移動し、効率的な命令スケジューリングを実現します。これにより、VLIWアーキテクチャ向けの並列実行可能な命令束が形成されます。 |
| `asm3.asm`    | ループ越え命令スケジューリングとVLIW構築 | ループの境界を超えて命令の順序を最適化し、命令を高密度に詰め込むことで、最終的なVLIW命令セットを構築します。 |

※ サイクル数は `.asm` ファイル末尾に注記予定。

---

## 実装フロー

### Intrinsic 

アルゴリズム内でSIMD適用可能な領域を検出し、該当箇所にIntrinsic関数を導入します。また、最適化の一環として、小規模かつ固定長のループはループアンローリングを適用しています。

- SIMD
- Intrinsic


### assembler step1

演算ユニットアサイン、レジスタアサイン、ディレイスロットを配慮しつつ、最適化を排して命令をストレートにシーケンシャルで並べる
- レジスタアサイン 
- ユニットアサイン
- ディレイスロット

### assembler step2

ループ内の命令順序を最適化し、依存関係を考慮して命令を密に配置します。重複する処理はループ外に移動し、効率的な命令スケジューリングを実現します。これにより、VLIWアーキテクチャ向けの並列実行可能な命令束が形成されます。

- 重複する処理のループ外への移動
- 命令スケジューリング


### assembler final

ループの境界を超えて命令の順序を最適化し、命令を高密度に詰め込むことで、最終的なVLIW命令セットを構築します。

- ループの境界を越えた命令の順序最適化
  
